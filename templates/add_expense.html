{% extends "user_base.html" %}
{% load static %}

{% block page_title %}
    اضافه کردن هزینه جدید
{% endblock %}

{% block content %}
    {% if users|length > 1 %}
        <form method="POST" action="." enctype="multipart/form-data">
            {% csrf_token %}
            <div class=" form-group">
                <label for="totalAmount">مبلغ کل</label>
                <div class="input-group mb-3">
                    <input type="number" step="100" class="form-control" placeholder="کل هزینه پرداخت شده"
                           aria-label="Recipient's username" aria-describedby="basic-addon2" name="totalAmount"
                           id="totalAmount" required>
                    <div class="input-group-append">
                        <span class="input-group-text" id="basic-addon2">تومان</span>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label for="subjectInput">عنوان هزینه</label>
                <input type="text" class="form-control" id="subjectInput" aria-describedby="emailHelp"
                       placeholder="عنوان هزینه انجام شده را وارد کنید" name="subject" required>
            </div>
            <div class="form-group">
                <label for="descriptionInput">توضیحات هزینه</label>
                <textarea class="form-control" id="descriptionInput" rows="3" name="description"></textarea>
            </div>
            <label class="my-1 mr-2" for="selectPayer">پرداخت کننده هزینه</label>
            <select class="custom-select my-1 mr-sm-2" id="selectPayer" name="payer" required>
                <option selected>پرداخت کننده را انتخاب کنید...</option>
                {% for user in users %}
                    <option value="{{ user.username }}">{{ user.username }}</option>
                {% endfor %}
            </select>
            <br>
            <br>

            {% if type_of_calculate != "1" %}
                <table class="table table-striped">
                    <thead>
                    <tr>
                        <th scope="col">نام کاربری</th>
                        <th scope="col">{% if type_of_calculate == "2" %}
                            مبلغ
                        {% else %}
                            درصد
                        {% endif %}</th>
                    </tr>
                    </thead>
                    <tbody>
                    {% for user in users %}
                        <tr>
                            <th scope="row">{{ user.username }}</th>
                            <td class="input-group mb-3">
                                <input type="number" class="form-control"
                                       placeholder="{% if type_of_calculate == "2" %}مبلغ مورد نظر را وارد کنید{% else %}درصد مورد نظر را وارد کنید{% endif %}"
                                       aria-label="Recipient's username" aria-describedby="basic-addon2"
                                       name="{{ user.username }}">
                                <div class="input-group-append">
                                        <span class="input-group-text"
                                              id="basic-addon2">{% if type_of_calculate == "2" %}
                                            تومان
                                        {% else %}
                                            %
                                        {% endif %}</span>
                                </div>
                            </td>
                        </tr>
                    {% endfor %}
                    </tbody>
                </table>
            {% endif %}

            <div class="form-group">
                <label for="exampleFormControlFile1">عکس هزینه مورد نظر را آپلود کنید</label>
                <input type="file" class="form-control-file" id="exampleFormControlFile1" name="expenseImage">
            </div>
            <button type="submit" class="btn btn-primary">ثبت هزینه</button>
        </form>
    {% else %}
        <h4>هیچ کسی جز شما در گروه حضور ندارد</h4>
    {% endif %}

{% endblock %}